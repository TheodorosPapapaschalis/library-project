# ===== Phase 2 comprehensive test =====

# Displays
S 5

# Genres
G 10 "CS"
G 20 "History"
G 30 "Math"
G 10 "CS-dup"                  # duplicate gid -> IGNORED

# Books (valid)
BK 301 10 "Algorithms"
BK 401 10 "Compilers"
BK 402 10 "Networks"
BK 501 20 "Ancient Greece"
BK 601 30 "Linear Algebra"

# Book (invalid gid) -> IGNORED
BK 999 99 "Ghost Book"

# Members
M 3001 "Alice"
M 3002 "Bob"
M 3003 "Eva"
M 3001 "AliceDup"              # duplicate sid -> IGNORED

# --- Find by title (AVL) before any ratings ---
F "Compilers"                  # should find 401
F "Nonexistent"               # NOT FOUND

# Loans (with a duplicate)
L 3001 401                     # Alice -> Compilers
L 3001 401                     # duplicate loan -> IGNORED
L 3002 402                     # Bob -> Networks
L 3002 501                     # Bob -> Ancient Greece
L 3003 301                     # Eva -> Algorithms

# Returns with ratings (heap updates + activity updates)
R 3001 401 9 ok                # avg(401)=9.00
R 3002 501 7 ok                # avg(501)=7.00
R 3002 402 8 ok                # avg(402)=8.00
R 3003 301 10 ok               # avg(301)=10.00

# Per-genre print (Phase 1 feature still correct)
PG 10
PG 20
PG 30

# Top-K recommendations (heap)
TOP 3

# Active members (activity list)
AM

# Update a title (AVL delete+insert)
U 402 "Computer Networks"
F "Computer Networks"          # should find 402 with avg 8.00
F "Networks"                   # NOT FOUND (title changed)

# Global stats
X

# Distribute displays + print display
D
PD

# BF: free everything (end of session)
BF
